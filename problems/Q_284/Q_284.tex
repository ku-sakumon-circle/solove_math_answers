\begin{thm}{284}{\hosi 6}{Putnum 2018}
    $n<10^{100}$である正の整数のうち
    \begin{itemize}
\item $n$が$2^n$を割り切る
\item $n-1$が$2^{n}-1$を割り切る
\item $n-2$が$2^{n}-2$を割り切る
    \end{itemize}
    ものを全て求めよ. 
\end{thm}

$n-1,n-2\neq 0$の必要があるので, $n\geq 3$で考える. 

1つめの条件より$n=2^i$ と表せる ($0\leq i\leq n$). 

$2^i - 1$ が $2^n-1$を割り切るとき, $n = 2^i$は$i$で割り切れる. 実際, $n$を$i$で割った余りを$r$とするとき, $n=qi + r$とおいて
$$
2^n \equiv (2^i)^q\cdot 2^r \equiv 1^q \cdot 2^r \equiv 2^r\pmod{(2^i - 1)} 
$$
より$2^r-1 \equiv 0$となるので, $2^r-1$は$2^i-1$の倍数であり, $r$の範囲 $0\leq r < i$ より $2^r-1 = 0$ (すなわち $r=0$) となるしかないためである. 

$2^i$が$i$で割り切れるので, $i = 2^j$ ($0\leq j$) と表せる. 

次に, $n - 2 = 2^{2^{j}} - 2$ が $2^{2^{2^{j}}} - 2$ を割り切るので, $2^{2^{j} - 1} - 1$ が $2^{2^{2^{j}} - 1} - 1$を割り切る. よって同様の議論から, $2^{j} - 1$が$2^{2^{j}} - 1$を割り切る. よって$j$は$2^{j}$を割り切るから, $j=2^k$ ($k\geq 0$) とおける. 

以上より, $n=2^{2^{2^{k}}}$ ($k\geq 0$) とｊかけることが条件なので, $2^{300}<10^{100}<2^{400}$ より $k=0,1,2,3$ のみが適する. 以上より
$$
n = 2^2, 2^4, 2^{16}, 2^{256}. 
$$